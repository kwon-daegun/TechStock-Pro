<Window x:Class="InventorySystem.UI.Views.Windows.NewOrderWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="New Order" Height="600" Width="900"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize"
        Background="#111827">
    <Window.Resources>
        <Style x:Key="CheckoutButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF007B52"/>
            <Setter Property="Foreground" Value="#FFF"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="6" Padding="10,5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FF009A1F"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CartButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#2563EB"/>
            <Setter Property="Foreground" Value="#FFF"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="6" Padding="10,5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FF0064C1"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CancelButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#9CA3AF"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="6" Padding="10,5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FF223658"/>
                                <Setter Property="Foreground" Value="#FFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>


    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="#1F2937" CornerRadius="8" Padding="15" VerticalAlignment="Top">
            <StackPanel>
                <TextBlock Text="Select Product" Foreground="#9CA3AF" FontSize="14" Margin="0,0,0,10"/>
                <ComboBox x:Name="CmbProductSelect" Height="40" Margin="0,0,0,15" FontSize="14" Padding="10,10,0,0"/>

                <Button x:Name="BtnAddToCart" Style="{StaticResource CartButtonStyle}" Content="Add to Cart" Height="40" Background="#2563EB" Foreground="White" 
                        Click="BtnAddToCart_Click" BorderThickness="0" Cursor="Hand" FontWeight="SemiBold"/>

                <TextBlock Text="* Only products with stock > 0 are shown." Foreground="#4B5563" FontSize="12" Margin="0,20,0,0" TextWrapping="Wrap"/>
            </StackPanel>
        </Border>

        <Grid Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <DataGrid x:Name="CartGrid" Grid.Row="0" Background="#1F2937" RowBackground="Transparent"
                      AutoGenerateColumns="False" HeadersVisibility="Column" BorderThickness="0"
                      GridLinesVisibility="Horizontal" HorizontalGridLinesBrush="#374151" RowHeight="50" 
                      CanUserAddRows="False" CanUserResizeRows="False">
                <DataGrid.Resources>
                    <Style x:Key="CenterText" TargetType="TextBlock">
                        <Setter Property="VerticalAlignment" Value="Center"/>
                        <Setter Property="Padding" Value="10,0,0,0"/>
                    </Style>
                </DataGrid.Resources>
                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Foreground" Value="#fff"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#374151"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.CellStyle>
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Background" Value="Transparent"/>
                    </Style>
                </DataGrid.RowStyle>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="PRODUCT" ElementStyle="{StaticResource CenterText}" Binding="{Binding ProductName}" Width="*" IsReadOnly="True"/>
                    <DataGridTextColumn Header="PRICE" ElementStyle="{StaticResource CenterText}" Binding="{Binding UnitPrice, StringFormat='₹ {0:N2}'}" Width="100" IsReadOnly="True"/>

                    <DataGridTemplateColumn Header="QTY" Width="80">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding Quantity, UpdateSourceTrigger=PropertyChanged, TargetNullValue=1}"
                                         LostFocus="TxtQuantity_LostFocus" Background="#111827" 
                                         Foreground="#fff" BorderThickness="0" TextAlignment="Center" 
                                         VerticalContentAlignment="Center"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTextColumn Header="TOTAL" ElementStyle="{StaticResource CenterText}" Binding="{Binding Subtotal, StringFormat='₹ {0:N2}'}" Width="100" IsReadOnly="True" FontWeight="Bold"/>

                    <DataGridTemplateColumn Width="50">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="X" Click="BtnRemoveItem_Click" Background="Transparent" Foreground="#EF4444" BorderThickness="0" FontWeight="Bold" Cursor="Hand"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

            <Border Grid.Row="1" Background="#1F2937" Margin="0,20,0,0" Padding="20" CornerRadius="8">
                <DockPanel>
                    <StackPanel Orientation="Vertical" VerticalAlignment="Center">
                        <TextBlock Text="Total To Pay" Foreground="#9CA3AF" FontSize="14"/>
                        <TextBlock x:Name="TxtGrandTotal" Text="₹ 0.00" Foreground="#10B981" FontSize="28" FontWeight="Bold"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="Cancel" Cursor="Hand" Style="{StaticResource CancelButtonStyle}" Click="BtnCancel_Click" Width="100" Height="45" Background="Transparent" Foreground="#9CA3AF" BorderBrush="#4B5563" Margin="0,0,10,0"/>
                        <Button Content="Checkout" Cursor="Hand" Style="{StaticResource CheckoutButtonStyle}" Click="BtnCheckout_Click" Width="140" Height="45" Background="#10B981" Foreground="White" FontWeight="Bold" BorderThickness="0"/>
                    </StackPanel>
                </DockPanel>
            </Border>
        </Grid>
    </Grid>
</Window>